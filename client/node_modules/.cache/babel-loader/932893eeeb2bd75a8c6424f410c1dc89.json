{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport usePatchElement from '../../_util/hooks/usePatchElement';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport HookModal from './HookModal';\nvar uuid = 0;\nvar ElementsHolder = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (_props, ref) {\n  var _usePatchElement = usePatchElement(),\n      _usePatchElement2 = _slicedToArray(_usePatchElement, 2),\n      elements = _usePatchElement2[0],\n      patchElement = _usePatchElement2[1];\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      patchElement: patchElement\n    };\n  }, []); // eslint-disable-next-line react/jsx-no-useless-fragment\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\nexport default function useModal() {\n  var holderRef = React.useRef(null); // ========================== Effect ==========================\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      actionQueue = _React$useState2[0],\n      setActionQueue = _React$useState2[1];\n\n  React.useEffect(function () {\n    if (actionQueue.length) {\n      var cloneQueue = _toConsumableArray(actionQueue);\n\n      cloneQueue.forEach(function (action) {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]); // =========================== Hook ===========================\n\n  var getConfirmFunc = React.useCallback(function (withFunc) {\n    return function hookConfirm(config) {\n      var _a;\n\n      uuid += 1;\n      var modalRef = /*#__PURE__*/React.createRef();\n      var closeFunc;\n      var modal = /*#__PURE__*/React.createElement(HookModal, {\n        key: \"modal-\".concat(uuid),\n        config: withFunc(config),\n        ref: modalRef,\n        afterClose: function afterClose() {\n          closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n        }\n      });\n      closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n      return {\n        destroy: function destroy() {\n          function destroyAction() {\n            var _a;\n\n            (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n          }\n\n          if (modalRef.current) {\n            destroyAction();\n          } else {\n            setActionQueue(function (prev) {\n              return [].concat(_toConsumableArray(prev), [destroyAction]);\n            });\n          }\n        },\n        update: function update(newConfig) {\n          function updateAction() {\n            var _a;\n\n            (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n          }\n\n          if (modalRef.current) {\n            updateAction();\n          } else {\n            setActionQueue(function (prev) {\n              return [].concat(_toConsumableArray(prev), [updateAction]);\n            });\n          }\n        }\n      };\n    };\n  }, []);\n  var fns = React.useMemo(function () {\n    return {\n      info: getConfirmFunc(withInfo),\n      success: getConfirmFunc(withSuccess),\n      error: getConfirmFunc(withError),\n      warning: getConfirmFunc(withWarn),\n      confirm: getConfirmFunc(withConfirm)\n    };\n  }, []); // eslint-disable-next-line react/jsx-key\n\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    ref: holderRef\n  })];\n}","map":{"version":3,"sources":["C:/Users/vyshn/OneDrive/Desktop/Mern project/CarDhundo/client/node_modules/antd/es/modal/useModal/index.js"],"names":["_toConsumableArray","_slicedToArray","React","usePatchElement","withConfirm","withError","withInfo","withSuccess","withWarn","HookModal","uuid","ElementsHolder","memo","forwardRef","_props","ref","_usePatchElement","_usePatchElement2","elements","patchElement","useImperativeHandle","createElement","Fragment","useModal","holderRef","useRef","_React$useState","useState","_React$useState2","actionQueue","setActionQueue","useEffect","length","cloneQueue","forEach","action","getConfirmFunc","useCallback","withFunc","hookConfirm","config","_a","modalRef","createRef","closeFunc","modal","key","concat","afterClose","current","destroy","destroyAction","prev","update","newConfig","updateAction","fns","useMemo","info","success","error","warning","confirm"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport usePatchElement from '../../_util/hooks/usePatchElement';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport HookModal from './HookModal';\nvar uuid = 0;\nvar ElementsHolder = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (_props, ref) {\n  var _usePatchElement = usePatchElement(),\n    _usePatchElement2 = _slicedToArray(_usePatchElement, 2),\n    elements = _usePatchElement2[0],\n    patchElement = _usePatchElement2[1];\n  React.useImperativeHandle(ref, function () {\n    return {\n      patchElement: patchElement\n    };\n  }, []);\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\nexport default function useModal() {\n  var holderRef = React.useRef(null);\n  // ========================== Effect ==========================\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    actionQueue = _React$useState2[0],\n    setActionQueue = _React$useState2[1];\n  React.useEffect(function () {\n    if (actionQueue.length) {\n      var cloneQueue = _toConsumableArray(actionQueue);\n      cloneQueue.forEach(function (action) {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]);\n  // =========================== Hook ===========================\n  var getConfirmFunc = React.useCallback(function (withFunc) {\n    return function hookConfirm(config) {\n      var _a;\n      uuid += 1;\n      var modalRef = /*#__PURE__*/React.createRef();\n      var closeFunc;\n      var modal = /*#__PURE__*/React.createElement(HookModal, {\n        key: \"modal-\".concat(uuid),\n        config: withFunc(config),\n        ref: modalRef,\n        afterClose: function afterClose() {\n          closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n        }\n      });\n      closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n      return {\n        destroy: function destroy() {\n          function destroyAction() {\n            var _a;\n            (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n          }\n          if (modalRef.current) {\n            destroyAction();\n          } else {\n            setActionQueue(function (prev) {\n              return [].concat(_toConsumableArray(prev), [destroyAction]);\n            });\n          }\n        },\n        update: function update(newConfig) {\n          function updateAction() {\n            var _a;\n            (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n          }\n          if (modalRef.current) {\n            updateAction();\n          } else {\n            setActionQueue(function (prev) {\n              return [].concat(_toConsumableArray(prev), [updateAction]);\n            });\n          }\n        }\n      };\n    };\n  }, []);\n  var fns = React.useMemo(function () {\n    return {\n      info: getConfirmFunc(withInfo),\n      success: getConfirmFunc(withSuccess),\n      error: getConfirmFunc(withError),\n      warning: getConfirmFunc(withWarn),\n      confirm: getConfirmFunc(withConfirm)\n    };\n  }, []);\n  // eslint-disable-next-line react/jsx-key\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    ref: holderRef\n  })];\n}"]},"metadata":{},"sourceType":"module"}